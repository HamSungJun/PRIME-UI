# Pui-Popover

- `Tooltip` 과 사용 목적은 비슷하지만 좀 더 대상 요소에 대한 상세한 내부 컨텐츠를 표시하기 위한 용도로 사용됨.

- 간소한 상호작용 정도가 포함 될 수 있으며 되도록 자동적으로 팝오버 인스턴스가 어플리케이션에서 삭제되는 형태를 지향한다.

## Requirements

- `동작`

    - [x] 팝오버 엘리먼트를 대상 엘리먼트의 특정 방향에 발생 시킬 수 있다.
    - [x] 팝오버 엘리먼트가 활성화/비활성화 되는 단계에 애니메이션을 지정할 수 있다.
    - [ ] 대상 엘리먼트와 팝오버 엘리먼트 사이의 거리를 지정 할 수 있다.
    - [ ] 팝오버 엘리먼트에 화살표 표시 여부를 지정할 수 있다.
    - [x] 팝오버 엘리먼트가 활성화 된 후, 비활성화 된 후에 특정 동작을 하도록 설정할 수 있다.
    - [ ] 대상 엘리먼트에서 특정한 이벤트가 발생 했을 때 팝오버가 비활성화 되도록 설정할 수 있다.
    - [x] 새로운 팝오버를 발생시켰을 때 기존의 팝오버 인스턴스에 대한 해제 여부를 설정할 수 있다.
    - [x] 위의 동작에 대한 기본 옵션을 미리 설정 혹은 변경할 수 있다.

- `뷰`

    - [x] 다이나믹 컴포넌트가 렌더링 하는 뷰의 형태에 따름.
    - [ ] [`placer.js`](../$common/placer) 의 반환값을 통해 지정 위치의 절대 좌표에 발생하고 이후 대상 엘리먼트의 위치가 변동하는 경우 `translate()` 속성을 통해 `repaint` 과정만 동반할 수 있도록 한다.

## Research & Analyze

> 팝오버 발생 이후 윈도우 레벨의 스크롤, 리사이징 혹은 컨테이너의 스크롤 단계에서 대상 엘리먼트의 위치가 이동했을 때 팝오버에 반응형 옵션을 도입하여 같이 움직여주면 좋겠다고 생각하고 있다. 기본적인 구현이 완료되면 고급 옵션으로 포함할 예정이다.

> 반응형 동작에 대한 구상은 다음과 같다. responsive: true로 발생시킨 팝오버를 처리하는 단계에서 source element를 팝오버 컨트롤러에서 단일 객체로 갖고 있는 InterSection Observer 에 등록한다.(다른 방법도 있을 것이다.)  옵저버가 지속적으로 반응형으로 동작하도록 지정한 source 를 관찰하고 있으니 onIntersect 마다 이전 위치 대비 이동한 만큼 자신을 기준으로 발생시킨 팝오버의 위치를 수정해주면 어떨까 한다.

## Reconstruction

- 기본 구현이 완료되면 반응형 동작 옵션 도입 시도하기.

- 사용자가 입력한 방향에 배치시켰을 때 팝오버 인스턴스가 `ViewPort` 와 충돌한 경우

    - 별도의 옵션을 지정하지 않은 경우, 해당 위치에 발생 시킨다.

    - 옵션을 지정한 경우, 배치 방향 리스트를 순회하면서 손해량이 없는 곳에 배치하거나 어느 방향에 배치해도 손해량이 존재한다면 가장 손해량이 적은 곳에 배치한다.

## Reference

- [Modal과 PopUp 구분하기](http://design.gabia.com/wordpress/?p=33075)

- [ElementUI - Popover](https://element.eleme.io/#/en-US/component/popover)

- [BootstrapVue - Popover](https://bootstrap-vue.org/docs/components/popover)
